Since a lot of people requested the source code for this example I put everything together.
I created this example back in 2010 so the code might be outdated especially the OpenGL part since it uses a lot of deprecated code.
I am not sure if this examples still works with the latest OpenCV release.
Nevertheless I hope it will help you! :)